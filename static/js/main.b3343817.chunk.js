(this["webpackJsonpreact-battleship"]=this["webpackJsonpreact-battleship"]||[]).push([[0],{31:function(n,e,t){n.exports=t(41)},41:function(n,e,t){"use strict";t.r(e);var r=t(2),o=t(0),a=t.n(o),c=t(22),i=t.n(c),u=t(3),l=t(27),f=t(43),s=t(28),p=t(13),h=t(5),d=t(16),m=t.n(d);function g(n,e,t,r){var o=n,a=e,c=[];c.push({row:o,col:a});for(var i=0;i<t-1;i++)r&&a++,r||o++,c.push({row:o,col:a});return c}function v(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=0,a=g(n,e,t,r),c=function(){return o++},i=function(){return o===t},u=function(){return a[0]};return{get length(){return t},get orientation(){return r},coords:a,getStartCoords:u,hit:c,isSunk:i}}function b(n,e){return Math.floor(Math.random()*(Math.floor(e)-Math.ceil(n)))+Math.ceil(n)}var w="ship";function E(){for(var n=[],e=0;e<10;e++){n.push([]);for(var t=0;t<10;t++)n[e].push("")}return n}var j=function(n){return!!(n.row>=0&&n.col>=0&&n.row<10&&n.col<10)};function x(){var n=E(),e=[],t=function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=n.length,r=void 0===t?1:t,o=n.orientation,a=n.getStartCoords(),c=a.row,i=a.col,u=[];if(!o){u.push({row:c-1,col:i-1}),u.push({row:c-1,col:i}),u.push({row:c-1,col:i+1});for(var l=c;l<c+r;l++)u.push({row:l,col:i-1}),e&&u.push({row:l,col:i}),u.push({row:l,col:i+1});u.push({row:c+r,col:i-1}),u.push({row:c+r,col:i}),u.push({row:c+r,col:i+1})}if(o){u.push({row:c-1,col:i-1}),u.push({row:c,col:i-1}),u.push({row:c+1,col:i-1});for(var f=i;f<i+r;f++)u.push({row:c-1,col:f}),e&&u.push({row:c,col:f}),u.push({row:c+1,col:f});u.push({row:c-1,col:i+r}),u.push({row:c,col:i+r}),u.push({row:c+1,col:i+r})}return u.filter(j)},r=function(e){var r=e.length,o=e.getStartCoords(),a=o.row,c=o.col;if(a<0||c<0||c>=10||a>=10)return!1;if(e.orientation&&c+r>10)return!1;if(!e.orientation&&a+r>10)return!1;var i=t(e),u=!1,l=!0,f=!1,s=void 0;try{for(var p,h=i[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var d=p.value;if("S"===n[d.row][d.col]){u=!0;break}}}catch(m){f=!0,s=m}finally{try{l||null==h.return||h.return()}finally{if(f)throw s}}return!u},o=function(t,o,a){var c=t.coords;c.forEach((function(e){n[e.row][e.col]=""})),e=e.filter((function(n){return!n.coords.find((function(n){return t.coords[0].row===n.row&&t.coords[0].col===n.col}))}));var i=v(o,a,t.length,t.orientation);return!!r(i)||(c.forEach((function(e){n[e.row][e.col]="S"})),e.push(t),!1)},a=function(t){return!!r(t)&&(t.coords.forEach((function(e){n[e.row][e.col]="S"})),e.push(t),!0)},c=function(){Object.entries({s4:{quantity:1,length:4},s3:{quantity:2,length:3},s2:{quantity:3,length:2},s1:{quantity:4,length:1}}).forEach((function(n){for(var e=Object(h.a)(n,2),t=(e[0],e[1]),r=t.quantity,o=t.length;r>0;){var c=v(b(0,10),b(0,10),o,Math.random()>.5);a(c)&&r--}}))};return{getShips:function(){return e},getGameboard:function(){return n},getAttackboard:function(){return n.map((function(n){return n.map((function(n){return"S"===n?"":n}))}))},placeShip:a,canMoveShip:o,moveShip:function(n,e,t){if(o(n,e,t)){var r=v(e,t,n.length,n.orientation);return a(r),r}},placeShips:c,receiveAttack:function(r,o){if("S"!==n[r][o])return n[r][o]="M","miss";var a=e.find((function(n){return n.coords.find((function(n){return n.row===r&&n.col===o}))}));return a?(a.hit(),a.isSunk()?(n[r][o]="X",function(e){t(e,!1).forEach((function(e){n[e.row][e.col]="M"}))}(a),"dead"):(n[r][o]="X","hit")):void 0},randomizeShips:function(){n=E(),e=[],c()}}}function O(){var n=x();return{receiveAttack:n.receiveAttack,placeShip:n.placeShip,placeShips:n.placeShips,getGameboard:n.getGameboard,getAttackboard:n.getAttackboard,getShips:n.getShips,attack:function(n,e,t){return"miss"!==n.receiveAttack(e,t)},hasLost:function(){return n.getShips().every((function(n){return n.isSunk()}))},randomizeShips:n.randomizeShips,canMoveShip:n.canMoveShip,moveShip:n.moveShip}}function S(){var n=[],e=O(),t=function(e){var t=e.getAttackboard();return 0===n.length?function(n){for(var e=[],t=0;t<10;t++)for(var r=0;r<10;r++)""===n[t][r]&&e.push({row:t,col:r});return e[b(0,e.length)]}(t):function(e){var t=n[n.length-1],r=t.row,o=t.col,a=[];if(n.length>1){var c=n[n.length-2];if(c.row===r){var i=n.sort((function(n,e){return n.col-e.col})),u=i[0],l=i[i.length-1];a.push({row:r,col:l.col+1}),a.push({row:r,col:u.col-1})}if(c.col===o){var f=n.sort((function(n,e){return n.row-e.row})),s=f[0],p=f[f.length-1];a.push({row:p.row+1,col:o}),a.push({row:s.row-1,col:o})}}else a.push({row:r-1,col:o}),a.push({row:r,col:o+1}),a.push({row:r+1,col:o}),a.push({row:r,col:o-1});a=a.filter(j);var h=[];return a.forEach((function(n){""===e[n.row][n.col]&&h.push(n)})),h[b(0,h.length)]}(t)};return Object.assign(e,{attack:function(e){var r=t(e),o=r.row,a=r.col,c=e.receiveAttack(o,a);return"hit"===c?(n.push({row:o,col:a}),!0):"dead"===c&&(n=[],!0)}})}function y(){var n=Object(r.a)(["\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-column: 2/3;\n"]);return y=function(){return n},n}function k(){var n=Object(r.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 10px;\n"]);return k=function(){return n},n}function C(){var n=Object(r.a)(["\n  display: grid;\n  grid-template-rows: repeat(10, 1fr);\n  grid-column: 1/2;\n"]);return C=function(){return n},n}function M(){var n=Object(r.a)(["\n  display: grid;\n  width: 342px;\n  height: 342px;\n  grid-template: 32px 1fr/ 32px 1fr;\n  margin-right: 20px;\n"]);return M=function(){return n},n}var A=u.b.div(M()),D=u.b.div(C()),z=u.b.div(k()),G=u.b.div(y());function I(n){var e=n.children;return a.a.createElement(A,null,a.a.createElement(G,null,a.a.createElement(z,null,"A"),a.a.createElement(z,null,"B"),a.a.createElement(z,null,"C"),a.a.createElement(z,null,"D"),a.a.createElement(z,null,"E"),a.a.createElement(z,null,"F"),a.a.createElement(z,null,"G"),a.a.createElement(z,null,"H"),a.a.createElement(z,null,"I"),a.a.createElement(z,null,"J")),a.a.createElement(D,null,a.a.createElement(z,null,"1"),a.a.createElement(z,null,"2"),a.a.createElement(z,null,"3"),a.a.createElement(z,null,"4"),a.a.createElement(z,null,"5"),a.a.createElement(z,null,"6"),a.a.createElement(z,null,"7"),a.a.createElement(z,null,"8"),a.a.createElement(z,null,"9"),a.a.createElement(z,null,"10")),e)}var q=t(45);function F(){var n=Object(r.a)(["\n  position: relative;\n  background-color: #eee;\n  &::before {\n    content: '';\n    position: absolute;\n    height: 4px;\n    width: 4px;\n    border-radius: 50%;\n    background-color: #333;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n"]);return F=function(){return n},n}function Y(){var n=Object(r.a)(["\n  color: red;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 32px;\n"]);return Y=function(){return n},n}function P(){var n=Object(r.a)(["\n  box-shadow: 1px 0 0 0 #b4b4ff, 0 1px 0 0 #b4b4ff, 1px 1px 0 0 #b4b4ff,\n    1px 0 0 0 #b4b4ff inset, 0 1px 0 0 #b4b4ff inset;\n\n  &:hover {\n    border: ",";\n    cursor: ",";\n  }\n"]);return P=function(){return n},n}var B=u.b.div(P(),(function(n){return n.hover?"2px solid red":"none"}),(function(n){return n.hover&&"crosshair"})),J=Object(u.b)(B)(Y()),L=Object(u.b)(B)(F());function N(n){var e=n.type,t=n.onCellClick;return a.a.createElement(a.a.Fragment,null,function(n){return"X"===n?a.a.createElement(J,null,"\ud83d\uddf4"):"M"===n?a.a.createElement(L,null):void 0!==t?a.a.createElement(B,{onClick:t,hover:!0}):a.a.createElement(B,null)}(e))}var R=t(44);function T(){var n=Object(r.a)(["\n  position: absolute;\n  border: 2px solid #00f;\n  background-color: rgba(0, 0, 255, 0.05);\n  cursor: move;\n"]);return T=function(){return n},n}var X=u.b.div.attrs((function(n){var e=n.row,t=n.col,r=n.length,o=n.orientation;return{style:{top:32*e,left:32*t,width:o?32*r+1:"33px",height:o?"33px":32*r+1,opacity:n.isDragging?.3:.7}}}))(T());function H(n){var e=n.id,t=n.length,r=n.orientation,o=n.coords,c=Object(R.a)({item:{id:e,length:t,orientation:r,coords:o,type:w},collect:function(n){return{isDragging:n.isDragging()}}}),i=Object(h.a)(c,2),u=i[0].isDragging,l=i[1],f=o[0],s=f.row,p=f.col;return u?a.a.createElement(X,{ref:l,row:s,col:p,length:t,orientation:r&&!0,isDragging:!0}):a.a.createElement(X,{ref:l,row:s,col:p,length:t,orientation:r&&!0,isDragging:!1})}function K(){var n=Object(r.a)(["\n  display: grid;\n  grid-template-columns: repeat(10, 32px);\n  grid-template-rows: repeat(10, 32px);\n  position: relative;\n"]);return K=function(){return n},n}var Q=u.b.div(K());function U(n,e){var t=32*e.row,r=32*e.col;return{row:parseInt(Math.round((t+n.y)/32),10),col:parseInt(Math.round((r+n.x)/32),10)}}function V(n){var e=n.board,t=n.ships,r=n.canMoveShip,o=n.moveShip,c=Object(q.a)({accept:w,drop:function(n,e){var t=U(e.getDifferenceFromInitialOffset(),n.coords[0]),r=t.row,a=t.col;o(n,r,a)},canDrop:function(n,e){var t=U(e.getDifferenceFromInitialOffset(),n.coords[0]),o=t.row,a=t.col;return r(n,o,a)},collect:function(n){return{isOver:n.isOver(),canDrop:n.canDrop()}}}),i=Object(h.a)(c,2)[1];return a.a.createElement(Q,{ref:i},e.map((function(n,e){return n.map((function(n,t){return a.a.createElement(N,{type:n,key:"g".concat(e).concat(t)})}))})),t.map((function(n){var e=n.coords;return a.a.createElement(H,{coords:e,id:n.id,key:n.id,length:n.length,orientation:n.orientation})})))}function W(){var n=Object(r.a)(["\n  display: grid;\n  grid-template-columns: repeat(10, 32px);\n  grid-template-rows: repeat(10, 32px);\n  position: relative;\n"]);return W=function(){return n},n}var Z=u.b.div(W());function $(n){var e=n.board,t=n.onCellClick;return a.a.createElement(Z,null,e.map((function(n,e){return n.map((function(n,r){return a.a.createElement(N,{type:n,key:"g".concat(e).concat(r),onCellClick:function(){return t(e,r)}})}))})))}function _(){var n=Object(r.a)(["\n  margin-top: 10px;\n  text-align: center;\n"]);return _=function(){return n},n}function nn(){var n=Object(r.a)(["\n  display: flex;\n  grid-column: 1 / 4;\n  justify-content: space-around;\n  align-items: center;\n"]);return nn=function(){return n},n}function en(){var n=Object(r.a)(["\n  align-self: center;\n  padding: 10px 20px;\n  margin-top: 4px;\n  border: none;\n  border-radius: 5px;\n  background-color: lightgreen;\n  outline: none;\n  cursor: pointer;\n"]);return en=function(){return n},n}var tn=u.b.button(en()),rn=u.b.div(nn()),on=u.b.h3(_());function an(n){var e=n.onRandom,t=n.onPlay,r=n.onNewGame,o=n.started,c=n.winner,i=n.whoseTurn;return a.a.createElement(rn,null,o&&a.a.createElement(tn,{onClick:r},"New Game"),!c&&!o&&a.a.createElement(tn,{onClick:t},"Play"),!o&&!c&&a.a.createElement(on,null,"Place ships"),o&&!c&&a.a.createElement(on,null,i),o&&c&&a.a.createElement(on,null,"".concat(c," won the game")),a.a.createElement(tn,{onClick:e,disabled:o},"Random"))}function cn(){var n=Object(r.a)(["\n  grid-column: 1 / 4;\n  display: flex;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n"]);return cn=function(){return n},n}function un(){var n=Object(r.a)(["\n  display: inline-grid;\n  grid-template-rows: 100px 100px auto;\n  grid-template-columns: 1fr 1fr;\n"]);return un=function(){return n},n}var ln=u.b.div(un()),fn=u.b.header(cn()),sn=O(),pn=S();function hn(){var n=Object(o.useState)([]),e=Object(h.a)(n,2),t=e[0],r=e[1],c=Object(o.useState)([]),i=Object(h.a)(c,2),u=i[0],l=i[1],f=Object(o.useState)([]),d=Object(h.a)(f,2),g=d[0],v=d[1],b=Object(o.useState)(!1),w=Object(h.a)(b,2),E=w[0],j=w[1],x=Object(o.useState)(""),y=Object(h.a)(x,2),k=y[0],C=y[1],M=Object(o.useState)("Your turn"),A=Object(h.a)(M,2),D=A[0],z=A[1],G=function(){(sn=O()).placeShips(),(pn=S()).placeShips(),r(sn.getGameboard()),l(pn.getAttackboard()),v(sn.getShips().map((function(n){return Object(p.a)({},n,{id:m()()})}))),z("Your turn"),j(!1),C("")};Object(o.useEffect)((function(){return G()}),[]);var q=function(n,e){var t=sn.attack(pn,n,e);l(pn.getAttackboard()),pn.hasLost()?C("You"):t||(z("Computer turn"),function n(){setTimeout((function(){var e=pn.attack(sn);r(Object(s.a)(sn.getGameboard())),sn.hasLost()?C("Computer"):e?n():z("Your turn")}),400)}())};return a.a.createElement(ln,null,a.a.createElement(fn,null,a.a.createElement("h1",null,"Battleship")),a.a.createElement(an,{winner:k,started:E,onPlay:function(){j(!0)},onRandom:function(){E||(sn.randomizeShips(),v(sn.getShips().map((function(n){return Object(p.a)({},n,{id:m()()})}))))},onNewGame:function(){G()},whoseTurn:D}),a.a.createElement(I,null,a.a.createElement(V,{board:t,ships:g,canMoveShip:function(n,e,t){if(!E)return(n.row!==e||n.col!==t)&&sn.canMoveShip(n,e,t)},moveShip:function(n,e,t){var r=sn.moveShip(n,e,t),o=n.id;v(g.map((function(n){return n.id!==o?n:Object(p.a)({},r,{id:o})})))}})),a.a.createElement(I,null,a.a.createElement($,{board:u,onCellClick:function(n,e){E&&!k&&"Your turn"===D&&q(n,e)}})))}function dn(){var n=Object(r.a)(["\n  max-width: 1080px;\n  min-width: 990px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: center;\n"]);return dn=function(){return n},n}var mn=u.b.div(dn());function gn(){var n=Object(r.a)(["\n  html {\n    box-sizing: border-box;\n    font-size: 16px;\n    user-select: none;\n    font-family: 'Open Sans', sans-serif;\n  }\n\n  *, *:before, *:after {\n    box-sizing: inherit;\n  }\n\n  body, h1, h2, h3, h4, h5, h6, p, ol, ul {\n    margin: 0;\n    padding: 0;\n    font-weight: normal;\n  }\n\n  ol, ul {\n    list-style: none;\n  }\n\n  img {\n    max-width: 100%;\n    height: auto;\n  }\n"]);return gn=function(){return n},n}var vn=Object(u.a)(gn()),bn=a.a.createElement(a.a.Fragment,null,a.a.createElement(vn,null),a.a.createElement(f.a,{backend:l.a},a.a.createElement((function(){return a.a.createElement(mn,null,a.a.createElement(hn,null))}),null)));i.a.render(bn,document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.b3343817.chunk.js.map